if(typeof BANDIT==="undefined"){var BANDIT={start_time:(new Date()).getTime(),ttfl:null,opbandit_host:"https://optimize-stats.voxmedia.com",banditboard_host:"https://optimize.voxmedia.com",self_location:"voxmedia.com/loader.min.js",serialized_cache:{},error_count:0,magic:"1",control:false,key:null,sheet:null,elements:{},conversion_types:{},fetched:[],old_display:{},displayed:{},pubsubs:{},experiment_group:null,windowLoaded:false,choices:{},delayed_display:{},serde:{de:function(c){var e=(c||"").split("  "),a=0,d={},b=null;if(c&&c!=""){for(a=0;a<e.length;a++){b=e[a].split(" ");d[b[0]]=b[1]}}return d},ser:function(c){var b=[],a=null;for(a in (c||{})){b.push(a+" "+c[a])}return b.join("  ")}},reportError:function(b){if(++this.error_count>5){return}try{this.formPost(this.opbandit_host+"/clienterror",{message:b.stack||b.message||"Unknown error"})}catch(a){}},choose:function(b,l,c,m){var g=this,h=this.hash(b),f=0,d={},o=[],e=null,a=null,k=function(){var q=[],p=null,n=g.choices[h].choices.slice(0,c);for(p=0;p<n.length;p++){q.push(d[n[p]])}m(q,function(r){var i="ob:"+g.hash(r)+":"+h;if(!g.choices[h].siteInvalid){g.registerConversion(i,i)}})};if(this.key==null){this.key=this.getKey()}if(l.length<2||!m||c<1){return null}for(f=0;f<l.length;f++){e=this.hash(l[f]);if(e!=0){e="ob:"+e+":"+h;d[e]=l[f];o.push(e)}}if(h in this.choices){return k()}o.sort(function(){return 0.5-Math.random()});a=this.opbandit_host+"/choose?key="+this.key+"&experiments="+o.slice(0,c).join(",");this.addJavaScript(a,true,function(i){if(!i){g.choices[h]={choices:o.slice(0,c),siteInvalid:true}}k()})},sub:function(a,b){if(!(a in this.pubsubs)){this.pubsubs[a]=[]}this.pubsubs[a].push(b)},pub:function(a){var b=0;if(a in this.pubsubs){for(b=0;b<this.pubsubs[a].length;b++){this.pubsubs[a][b]()}}},addConversionType:function(c,b,a){this.conversion_types[this.hash(c)]=[b,a]},supressOptimizeAdmin:function(){window.location=(window.location+"").replace("optimizeadmin=1","optimizeadmin=0")},getKey:function(){var a=document.getElementsByTagName("script"),c=null,b=null,d="";for(c=0;c<a.length;c++){d=a[c].src;b=d.split("?").length>1?d.split("?")[1]:null;if(b!=null&&d.indexOf(this.self_location)>-1){return(b.split("=").length>1?b.split("=")[1]:"").split("&")[0]}}return""},htmlEncode:function(c){var e="",a=0,d=null,b=function(h){var g=c.charCodeAt(h),f=c.charCodeAt(h+1);return(55296<=g&&g<=56319&&56320<=f&&f<=57343)?(((g-55296)*1024)+(f-56320)+65536):g};for(a=0;a<c.length;a++){d=b(a);e+=(d>127)?("&#"+d+";"):c.charAt(a)}return e},purify:function(b){var a=b;a=a.replace(/\u007C/g,"&#124;");a=a.replace(/\u2019/g,"&rsquo;");a=a.replace(/\u2018/g,"&lsquo;");a=a.replace(/\u201D/g,"&rdquo;");a=a.replace(/\u201C/g,"&ldquo;");a=a.replace(/\u201E/g,"&bdquo;");a=a.replace(/\u201A/g,"&sbquo;");a=a.replace(/\u2026/g,"&hellip;");a=a.replace(/\u2014/g,"&mdash;");a=a.replace(/\u2013/g,"&ndash;");a=a.replace(/\u02C6/g,"&circ;");a=a.replace(/\u2039/g,"&lsaquo;");a=a.replace(/\u203A/g,"&rsaquo;");a=a.replace(/\u02DC/g,"&tilde;");a=a.replace(/\u00A0/g," ");a=a.replace(/\u20AC/g,"&euro;");a=a.replace(/\u2122/g,"&trade;");return this.htmlEncode(a)},trim:function(d){var c=d.replace(/^\s\s*/,""),a=/\s/,b=c.length;while(a.test(c.charAt(--b))){}return c.slice(0,b+1)},outerHTML:function(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML},setOuterHTML:function(c,b){var a=document.createElement("div");a.innerHTML=b;a=a.firstChild;c.parentNode.replaceChild(a,c);return a},chorusAdmin:function(){return document.getElementById("hub-admin-menu")!=null},serialize:function(b){var h="",a=null,m=null,d=false,c=this.trim,g=new RegExp("^url\\([^A-Za-z0-9_/]*","i"),k=new RegExp("\\W*\\)$","i"),f=new RegExp(/&quot;/gi),l=new RegExp(/\s+/g);m=this.purify((b.getAttribute&&b.getAttribute("data-chorus-optimize-wrap")=="true")?this.outerHTML(b):b.innerHTML);try{this.HTMLParser(m,{styleEscape:function(q){var n=q.replace(f,"'").split(";"),e=[],p=0,s=null,o=null,r=null;for(p=0;p<n.length;p++){s=n[p].split(":");if(s.length>1){o=c(s[0]);r=c(s.slice(1).join(":")).replace(g,"url(").replace(k,")");if(r.indexOf("url(")>-1&&r.indexOf(")")>-1){r=r.split(")")[0].replace(/\ /g,"%20")+r.substring(r.indexOf(")"))}if(o.length>1&&r.length>1){e.push(o.toLowerCase()+": "+r)}}}e.sort();return e.join("; ")},start:function(n,q,p){var o=null,r=0,e="class contenteditable hidden id style tabindex title align alt border height width src";if(n=="a"&&d){h+="</a>"}if(n=="a"){d=true}a=n;h+="<"+n;q.sort(function(t,s){return(t.name<s.name)?-1:1});for(r=0;r<q.length;r++){if(q[r].name.toLowerCase()=="style"){o=this.styleEscape(q[r].escaped);if(o.length>0){h+=' style="'+o+'"'}}else{if(n!="img"||e.indexOf(q[r].name)>-1||q[r].name.substring(0,5)=="data-"){h+=" "+q[r].name+'="'+q[r].escaped+'"'}}}h+=(p?"/":"")+">"},end:function(e){if(e=="a"&&!d){return}if(e=="a"){d=false}h+="</"+e+">"},chars:function(n){var e;if(a=="pre"||a=="code"||a=="script"){h+=n}else{if(a!="style"){e=n.replace(l," ");h+=(n!=" "&&c(e)=="")?"":e}}}})}catch(i){h=null;this.reportError(i)}return h},shash:function(b){var d=this.serialize(b),a=null,c=null,e=b.getAttribute("data-chorus-optimize-id");if(d==null){return null}c=this.hash((e!=null)?e:d);if(c==0){return null}if(b.getAttribute("data-chorus-optimize-opbox")!=null){a="ob:"+c+":"+this.hash(b.getAttribute("data-chorus-optimize-opbox"))}else{a="h:"+c}if(this.experiment_group!=null){a+=":"+this.hash(this.experiment_group)}this.serialized_cache[a]=d;return a},getExperimentGroup:function(){var c=document.getElementsByTagName("meta"),a=null,b=null;for(a=0;a<c.length;a++){if(c[a].getAttribute("content")!=null&&c[a].getAttribute("property")=="ob:experiment-group"){b=c[a].getAttribute("content")}}return b},hash:function(b){var c=0,a=0;if(b.length==0){return c}for(a=0;a<b.length;a++){c=((c<<5)-c)+b.charCodeAt(a);c=c&c}return c},loadAdmin:function(){var b=this,a=this.banditboard_host+"/sessions/load_admin?apikey="+this.key+"&hostname="+window.location.hostname;this.pub("loadingAdmin");this.experiment_group=this.getExperimentGroup();this.addJavaScript(a,false,function(c){if(!c){b.addJavaScript("http://optimize-assets.s3.amazonaws.com/admin-failsafe.js",false)}})},hasConverted:function(a){return this.getCookie("experiment_"+a)!=null},haveFetched:function(b){var a=0;for(a=0;a<this.fetched.length;a++){if(this.fetched[a]==b){return true}}return false},hasClass:function(b,a){return(b.className!=null&&(" "+b.className+" ").indexOf(" "+a+" ")>-1)},getUnseenBanditElements:function(){var c=[],b=0,a=null,e=null,d=false;a=document.getElementsByTagName("*");for(b=0;b<a.length;b++){d=false;if(a[b].hasAttribute("data-chorus-optimize-id")||a[b].hasAttribute("data-chorus-optimize-opbox")){d=true}else{if(a[b].nodeName.toLowerCase()=="a"&&a[b].getAttribute("href")!=null){e=a[b].getAttribute("href").split("?");if(e.length>1&&e[1].indexOf("chorus_optimize=1")>-1){d=true}}}if(d&&!this.haveFetched(a[b])){c.push(a[b]);this.fetched.push(a[b])}}return c},setOpacity:function(b,a){b.style.zoom=1;b.style.filter="alpha(opacity="+(a*100)+")";b.style["-moz-opacity"]=a;b.style["-khtml-opacity"]=a;b.style.opacity=a},hideElem:function(b){var a={filter:b.style.filter,"-moz-opacity":b.style["-moz-opacity"],"-khtml-opacity":b.style["-khtml-opacity"],opacity:b.style.opacity,zoom:b.style.zoom};this.setOpacity(b,0);return a},showElem:function(c,b){var a=null;for(a in b){if(b[a]!==undefined){c.style[a]=b[a]}}},loadVersion:function(a){var b=this.shash(a);if(!a._old_display&&b!=null&&!this.shouldLoadAdmin()){a._old_display=this.hideElem(a)}if(b==null||this.shouldLoadAdmin()){if(a._old_display){this.showElem(a,a._old_display)}if(this.shouldLoadAdmin()){a.removeAttribute("data-chorus-optimize-autoload");this.pub("renderedAlternative")}return}if(a.getAttribute("data-chorus-optimize-autoload")!="false"){return}a.removeAttribute("data-chorus-optimize-autoload");if(!(b in this.elements)){this.elements[b]=[];this.old_display[b]=[];this.delayed_display[b]=1}this.elements[b].push(a);this.old_display[b].push(a._old_display);this.fetchAlternatives([b])},process:function(){this.pub("processing");if(this.key==null){this.key=this.getKey()}if(this.experiment_group==null){this.experiment_group=this.getExperimentGroup()}var b=this.getUnseenBanditElements(),c=[],d=null,e=null,a=40;for(d=0;d<b.length;d++){e=this.shash(b[d]);if(b[d].getAttribute("data-chorus-optimize-autoload")=="false"){if(!b[d]._old_display){b[d]._old_display=this.hideElem(b[d])}}else{if(e!=null){if(!(e in this.elements)){this.elements[e]=[];this.old_display[e]=[];c.push(e)}this.elements[e].push(b[d]);this.old_display[e].push(this.hideElem(b[d]))}}if(e in this.displayed){this.render(e,e,this.displayed[e].value,e)}}if(c.length>0){for(d=0;d<Math.ceil(c.length/a);d++){this.fetchAlternatives(c.slice(d*a,(d*a)+a))}}if(!this.windowLoaded){_this=this;setTimeout(function(){_this.process()},100)}},onload:function(){var a=this.serde.de(this.getCookie("conversion_queue")),b=null;for(b in a){this.registerConversion(b,a[b])}this.windowLoaded=true;this.process();this.showBanditElements();_this=this;setTimeout(function(){_this.resetVisibility();_this.trackHit()},1300);for(name in this.conversion_types){if(this.conversion_types[name][1]){this.conversion_types[name][1]()}}},trackHit:function(){var a=this.opbandit_host+"/tracker?key="+this.key+"&hostname="+window.location.hostname+"&source="+encodeURIComponent(document.referrer),b=(window.location.pathname=="/"||window.location.pathname=="");this.storageWrapper("session",10,function(e){var c=parseInt(e.views||"0")+1,d=parseInt(e.root_views||"0");if(b){d+=1}e.views=c.toString();e.root_views=d.toString();a+="&views="+e.views+"&root_views="+e.root_views;return e});if(b){a+="&pathroot=1"}if(this.ttfl!=null){a+="&ttfl="+this.ttfl}if(this.control){a+="&control=1"}this.addJavaScript(a,true)},resetVisibility:function(d){if(d==null){d=false}var c=null,g=null,a=null,b=null,f=0,e=0;for(c in this.elements){e++;if(!(c in this.displayed)&&!(c in this.delayed_display)){f++;g=this.old_display[c];a=this.elements[c];this.displayed[c]={elements:a,value:null};for(b=0;b<a.length;b++){this.showElem(a[b],g[b])}if(this.ttfl==null){this.ttfl=(new Date()).getTime()-this.start_time}}}if(f>0&&!d){this.addJavaScript(this.opbandit_host+"/slowload?key="+this.key+"&total="+e+"&slow="+f+"&ttfl="+this.ttfl,true)}},elemAnchors:function(c){var a=c.getElementsByTagName("a"),b=c.parentNode;if(c.nodeName.toLowerCase()=="a"){return[c]}if(a.length>0){return a}while(b){if(b.nodeName.toLowerCase()=="a"){return[b]}b=b.parentNode}return[]},isConvertable:function(c){var a=this.elements[c],b=null;for(b=0;b<a.length;b++){if(this.elemAnchors(a[b]).length>0||a[b].getAttribute("data-chorus-optimize-conversion")!=null){return true}}return false},fetchAlternatives:function(c){var d=c.join(","),b=null,a="",e=this;for(b=0;b<c.length;b++){if(!this.isConvertable(c[b])&&!this.hasConverted(c[b])){a+="&experiment_"+c[b]+"=0"}}if(this.shouldForcePreview()){a+="&experiment_"+window.localStorage.chorus_optimize_preview_hash+"=0"}a+="&source="+encodeURIComponent(document.referrer).slice(0,50)+"&hostname="+window.location.hostname;this.addJavaScript(this.opbandit_host+"/alternatives?key="+this.key+"&experiments="+d+a,true,function(f){if(!f){e.resetVisibility(true);e.reportError({message:"Issue fetching alternatives"})}})},addJavaScript:function(a,c,h){var i=document.createElement("script"),g=null,f=this.getCookie("tracker_id"),e="cback",b=false,d=function(){if(!b){h(false)}};i.type="text/javascript";i.async=c;if(f!=null){a+=((a.indexOf("?")>0)?"&":"?")+"tracker_id="+f}a+=((a.indexOf("?")>0)?"&":"?")+"_="+Math.random();if(h){while(e.length<20){e+=Math.random().toString(36).substring(2,12)}a+="&callback="+e;window[e]=function(){b=true;h(true)};i.onerror=d;i.onreadystatechange=function(){if(i.readyState=="loaded"){d();i.onreadystatechange=function(){}}}}i.src=a;g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(i,g)},setTrackerID:function(a){if(this.getCookie("tracker_id")!=a){this.createCookie("tracker_id",a,1440000)}},storageWrapper:function(b,a,c){this.createCookie(b,this.serde.ser(c(this.serde.de(this.getCookie(b)))),a)},ackConversion:function(a){this.storageWrapper("conversion_queue",30,function(b){delete b[a];return b})},registerConversion:function(d,c){var b=encodeURIComponent(document.referrer).slice(0,50),a=this.opbandit_host+"/conversion?key="+this.getKey()+"&hostname="+window.location.hostname+"&experiment="+d+"&alternative_id="+c+"&source="+b,e=this;this.storageWrapper("conversion_queue",30,function(f){f[d]=c;return f});this.addJavaScript(a,false,function(){e.ackConversion(d)});return true},render:function(h,g,f,d){var c=this.elements[h],e=null,b=null;if(this.shouldForcePreview()&&h==window.localStorage.chorus_optimize_preview_hash){f=window.localStorage.chorus_optimize_preview_value;d=null}this.showBanditElements();if(h in this.displayed&&this.displayed[h].elements.length===c.length){return}this.displayed[h]=this.displayed[h]||{elements:[],value:null};for(e=0;e<c.length;e++){b=c[e];if(this.displayed[h].elements.indexOf(b)>=0){continue}this.displayed[h].elements.push(c[e]);this.displayed[h].value=f;if(f!=null){this.setContent(b,f);this.handleCredits(b)}this.showElem(b,this.old_display[h][e]);if(this.ttfl==null){this.ttfl=(new Date()).getTime()-this.start_time}if(d!=null){this.trackElem(b,d,g)}}this.pub("renderedAlternative")},elemsByClass:function(a,c){var b=a.getElementsByTagName("*"),e=[],d=null;for(d=0;d<b.length;d++){if(this.hasClass(b[d],c)){e.push(b[d])}}return e},setContent:function(b,a){var f=this,d=null;if(!("querySelector" in document&&"addEventListener" in window)){return}try{a=a.replace(/\r?\n|\r/g,"");a=JSON.parse(a)}catch(c){d=this.shash(b);f.reportError({message:"Issue parsing content JSON. Hash: "+d+", error: "+c});return}a.fields.forEach(function(m){var h,g,k,i,l,e;h="data-chorus-optimize-field";g="["+h+"='"+m.name+"']";k=(b.hasAttribute(h)&&b.getAttribute(h)===m.name)?b:b.querySelector(g);if(k){if(m.name==="main_image"){if(k.hasAttribute("data-cid")){cdata=JSON.parse(k.getAttribute("data-cdata"));if(cdata&&cdata.image_id&&(cdata.image_id!=m.img_id||BANDIT.shouldLoadAdmin())){if(cdata.dynamic_picture){e=k.getElementsByTagName("picture");if(e.length){k.removeChild(e[0]);k.className+=" removed-picture"}}cdata.image_id=m.img_id;cdata.convert_picture=true;k.setAttribute("data-cdata",JSON.stringify(cdata));if(window.DynamicImages&&typeof DynamicImages.findByElement==="function"){chorus_image=DynamicImages.findByElement(k);if(chorus_image){chorus_image.set({convert_picture:true,image_id:m.img_id},{silent:true});chorus_image.reload()}}}}else{if(k instanceof HTMLImageElement){k.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==")}k.setAttribute("data-original",m.value);i=k.getAttribute("data-imgkey");if(i!==null){l=i.split(":");l[0]=m.img_id;l=l.join(":")}else{if(!(k instanceof HTMLImageElement)){l=m.img_id+":*:1"}}if(k.classList){k.classList.remove("lazy-loading");k.classList.remove("lazy-loaded")}else{k.className=k.className.replace(/lazy-loading|lazy-loaded/g,"")}if(m.img_id==0||m.img_id==null){k.removeAttribute("data-imgkey")}else{k.setAttribute("data-imgkey",l)}}}else{if(m.type==="image"&&k instanceof HTMLImageElement){k.setAttribute("src",m.value)}else{if(k.innerHTML!==m.value){k.innerHTML=m.value}else{return}}}}else{return}});if((typeof Chorus!=="undefined"&&Chorus!==null)&&(Chorus.EventDispatcher!=null)){Chorus.EventDispatcher.publish("moduleInserted",{modules:b})}},setOneKid:function(b,a){try{while(b.lastChild){b.removeChild(b.lastChild)}b.appendChild(a)}catch(c){}},handleCredits:function(d){var a=d.getElementsByTagName("img"),b=null,f=null,e=null,c=null;for(b=0;b<a.length;b++){f=a[b].getAttribute("data-credit-id");e=a[b].getAttribute("data-credit-value");if(f!=null&&e!=null){c=document.getElementById(f);if(c){c.innerHTML=e}}}},trackElem:function(g,c,e){var h=this,b=null,d=null,a=this.elemAnchors(g),f=this.hash(g.getAttribute("data-chorus-optimize-conversion")||"click");if(f in this.conversion_types&&this.conversion_types[f][0]){this.conversion_types[f][0](g,c,e)}if(f!=this.hash("click")){this.createCookie("last_seen_"+f,c+" "+e,30)}b=function(i){h.addEvent(i,"mousedown",function(){var k=i.getAttribute("href"),l=c+" "+e+" "+k;if(k==null||k==""){return}if(h.getCookie("first_clicked_"+f)==null){h.createCookie("first_clicked_"+f,l,30)}h.createCookie("last_clicked_"+f,l,30)})};for(d=0;d<a.length;d++){b(a[d])}},lastSeenExperiment:function(b){var a=this.getCookie("last_seen_"+this.hash(b)),c=null;if(a==null){return null}c=a.split(" ");return{exphash:c[0],althash:c[1],url:null}},lastClickedExperiment:function(b){var a=this.getCookie("last_clicked_"+this.hash(b)),c=null;if(a==null){return null}c=a.split(" ");return{exphash:c[0],althash:c[1],url:c[2]}},firstClickedExperiment:function(b){var a=this.getCookie("first_clicked_"+this.hash(b)),c=null;if(a==null){return null}c=a.split(" ");return{exphash:c[0],althash:c[1],url:c[2]}},deleteCookie:function(a){this.createCookie(a,"",-1)},createCookie:function(c,e,d){var b=new Date(),a="";if(!d){d=30}b.setTime(b.getTime()+(d*60000));a="; expires="+b.toGMTString();document.cookie="chorus_optimize_"+c+"="+e+a+"; path=/"},getCookie:function(a){var e="chorus_optimize_"+a+"=",d=document.cookie.split(";"),c=null,b=null;for(c=0;c<d.length;c++){b=d[c];while(b.charAt(0)==" "){b=b.substring(1,b.length)}if(b.indexOf(e)==0){return b.substring(e.length,b.length)}}return null},formPost:function(c,h){var f=null,g=document.createElement("form"),b=null,a=document.getElementsByTagName("body")[0],e="banditiframe-"+(new Date()).getTime();try{f=document.createElement('<iframe name="'+e+'">')}catch(d){f=document.createElement("iframe");f.setAttribute("name",e)}f.style.display="none";g.style.display="none";g.setAttribute("method","POST");g.setAttribute("action",c);g.setAttribute("target",e);for(key in h){b=document.createElement("input");b.setAttribute("type","text");b.setAttribute("name",key);b.setAttribute("value",h[key]);g.appendChild(b)}a.appendChild(g);a.appendChild(f);g.submit()},updateTags:function(){var g=null,d=0,c=0,b=null,e={key:this.key},f=false,a=null;for(g in this.elements){for(d=0;d<this.elements[g].length;d++){b=this.elements[g][d].attributes;for(c=0;c<b.length;c++){a=b[c].nodeName;if(a.substring(0,21)=="data-chorus-optimize-"&&a!="data-chorus-optimize-wrap"&&a!="data-chorus-optimize-id"&&a!="data-chorus-optimize-opbox"&&a!="data-chorus-optimize-conversion"&&b[c].nodeValue!=""){e[g+" "+a]=b[c].nodeValue;f=true}}}}if(f){this.formPost(this.opbandit_host+"/tags",e)}},hideBanditElements:function(){var a=document.createTextNode(".chorus-optimize,[data-chorus-optimize-id]{filter:alpha(opacity=0);zoom:1;-moz-opacity:0.0;-khtml-opacity:0.0;opacity:0.0;}");this.sheet=document.createElement("style");this.sheet.type="text/css";if(this.sheet.styleSheet){this.sheet.styleSheet.cssText=a.nodeValue}else{this.sheet.appendChild(a)}document.getElementsByTagName("head")[0].appendChild(this.sheet)},showBanditElements:function(){this.pub("showingBanditElements");if(this.sheet){this.sheet.parentNode.removeChild(this.sheet);this.sheet=null}},addEvent:function(c,b,a){(c.attachEvent&&b!="DOMContentLoaded")?c.attachEvent("on"+b,a):c.addEventListener(b,a,false)},shouldSupressLogin:function(){return(window.location.href.indexOf("optimizeadmin=0")>0||this.shouldForcePreview())},shouldForcePreview:function(){return window.location.href.indexOf("optimizeadmin=2")>0&&!!window.localStorage&&window.localStorage.getItem("chorus_optimize_preview_hash")!=null&&window.localStorage.getItem("chorus_optimize_preview_value")!=null},addDOMLoadEvent:function(a){if(document.addEventListener){this.addEvent(document,"DOMContentLoaded",a)}else{this.addEvent(window,"load",a)}},hasLoaded:function(){return(document.readyState==="complete"||document.readyState==="interactive")},shouldLoadAdmin:function(){var a=(window.location.href.indexOf("optimizeadmin=1")>0);return(a||(this.getCookie("admin")=="1"&&!this.shouldSupressLogin()))},init:function(){if(!navigator.cookieEnabled){return}this.pub("initing");_this=this;this.key=this.getKey();if(this.key==null||this.key==""){return}this.storageWrapper("session",10,function(c){if(!("control" in c)){c.control=Math.random()>0.99?"1":"0"}_this.control=c.control=="1";return c});if(this.shouldLoadAdmin()){this.createCookie("admin","1",60*24*7);this.hasLoaded()?this.loadAdmin():this.addEvent(window,"load",function(){_this.loadAdmin()})}else{if(this.hasLoaded()){var a=this.serde.de(this.getCookie("conversion_queue")),b=null;for(b in a){this.registerConversion(b,a[b])}this.trackHit()}else{if(this.control&&!this.shouldSupressLogin()){this.trackHit()}else{this.hideBanditElements();this.addDOMLoadEvent(function(){_this.onload()});this.process()}}}},convertLastSeen:function(a){var b=this.lastSeenExperiment(a);if(b){this.registerConversion(b.exphash,b.althash)}},convertLastClick:function(a){var b=this.lastClickedExperiment(a);if(b){this.registerConversion(b.exphash,b.althash)}},convertFirstClick:function(a){var b=this.firstClickedExperiment(a);if(b){this.registerConversion(b.exphash,b.althash)}},HTMLParser:function(e,k){var i=/^<([-A-Za-z0-9_]+)((?:\s+[-\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,c=function(o){var n={},l=o.split(","),m=null;for(m=0;m<l.length;m++){n[l[m]]=true}return n},d=/^<\/([-A-Za-z0-9_]+)[^>]*>/,h=/([-A-Za-z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,g=c("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),b=c("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul");inline=c("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var");closeSelf=c("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),fillAttrs=c("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),special=c("script,style"),index=null,chars=null,match=null,text=null,stack=[],last=e;stack.last=function(){return this[this.length-1]};while(e){chars=true;if(!stack.last()||!special[stack.last()]){if(e.indexOf("<!--")==0){index=e.indexOf("-->");if(index>=0){if(k.comment){k.comment(e.substring(4,index))}e=e.substring(index+3);chars=false}}else{if(e.indexOf("</")==0){match=e.match(d);if(match){e=e.substring(match[0].length);match[0].replace(d,f);chars=false}}else{if(e.indexOf("<")==0){match=e.match(i);if(match){e=e.substring(match[0].length);match[0].replace(i,a);chars=false}}}}if(chars){index=e.indexOf("<");text=index<0?e:e.substring(0,index);e=index<0?"":e.substring(index);if(k.chars){k.chars(text)}}}else{e=e.replace(new RegExp("((.|\n)*)</"+stack.last()+"[^>]*>","i"),function(l,m){m=m.replace(/<!--(.*?)-->/g,"$1").replace(/<!\[CDATA\[(.*?)]]>/g,"$1");if(k.chars){k.chars(m)}return""});f("",stack.last())}if(e==last){throw"Parse Error: "+e}last=e}f();function a(l,o,p,m){var n=null,q=null;o=o.toLowerCase();if(b[o]){while(stack.last()&&inline[stack.last()]&&stack.last()!="a"){f("",stack.last())}}if(closeSelf[o]&&stack.last()==o){f("",o)}m=g[o]||!!m;if(!m){stack.push(o)}if(k.start){n=[];p.replace(h,function(s,r){q=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:fillAttrs[r]?r:"";n.push({name:r,value:q,escaped:q.replace(/(^|[^\\])"/g,'$1\\"')})});if(k.start){k.start(o,n,m)}}}function f(l,n){var o=null,m=null;if(!n){o=0}else{for(o=stack.length-1;o>=0;o--){if(stack[o]==n.toLowerCase()){break}}}if(o>=0){for(m=stack.length-1;m>=o;m--){if(k.end){k.end(stack[m])}}stack.length=o}}}};BANDIT.addConversionType("anyclick",function(c,a,b){BANDIT.addEvent(c,"mousedown",function(){BANDIT.registerConversion(a,b)})});BANDIT.addConversionType("click",function(e,c,d){var b=function(f){BANDIT.addEvent(f,"mousedown",function(){BANDIT.registerConversion(c,d)})},a=BANDIT.elemAnchors(e);for(j=0;j<a.length;j++){b(a[j])}});BANDIT.addConversionType("share",null,function(){var b=BANDIT.lastClickedExperiment("share"),d=function(){BANDIT.convertLastClick("share")},c=document.getElementsByTagName("iframe"),a=0,g=null,f=false,e=false;if(!b||(b.url!=window.location&&b.url!=window.location.pathname)){return}if(typeof twttr!="undefined"){twttr.ready(function(h){h.events.bind("tweet",d)})}if(typeof FB!="undefined"){FB.Event.subscribe("edge.create",d)}for(a=0;a<c.length;a++){g=c[a].getAttribute("src");if(g!=null&&g.indexOf("//www.facebook.com/plugins/")>-1){BANDIT.addEvent(c[a],"mouseenter",function(){f=true});BANDIT.addEvent(c[a],"mouseleave",function(){f=false});e=true}}if(e){BANDIT.addEvent(window,"blur",function(){if(f){d()}})}if(typeof addthis!="undefined"){addthis.addEventListener("addthis.menu.share",d)}if(typeof IN!="undefined"&&"$Class" in IN){IN.Event.on(IN.$Class("IN-widget"),"click",d)}});BANDIT.addConversionType("depth3",null,function(){var a=BANDIT.getCookie("depth3"),c=BANDIT.hash(window.location.pathname),b=null;if(a==null){b=c}else{if(a.split(" ").length==3){BANDIT.convertFirstClick("depth3");b="converted"}else{if(a.indexOf(c)<0&&a!="converted"){b=a+" "+c}}}if(b){BANDIT.createCookie("depth3",b,30)}});try{BANDIT.init()}catch(err){BANDIT.reportError(err)}};